<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description"
        content="TÃ¼rkÃ§e-Ä°ngilizce kelime Ã¶ÄŸrenme uygulamasÄ±. Spaced Repetition ile etkili kelime Ã¶ÄŸrenimi.">
    <title>VocabMaster - Ä°ngilizce Kelime Ã–ÄŸren</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0ea5e9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="VocabMaster">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="VocabMaster">
    <meta name="msapplication-TileColor" content="#8a4fff">
    <meta name="msapplication-navbutton-color" content="#8a4fff">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css?v=4">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“š</text></svg>">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <span class="logo-icon">ğŸ“š</span>
                <h1>VocabMaster</h1>
            </div>

            <div class="header-stats">
                <div class="stat-item streak" title="GÃ¼nlÃ¼k Seri">
                    <i class="fas fa-fire"></i>
                    <span class="stat-value" id="streakCount">0</span>
                </div>

                <div class="stat-item xp" title="Toplam XP">
                    <i class="fas fa-star"></i>
                    <span class="stat-value" id="xpCount">0</span>
                </div>

                <div class="level-info">
                    <span class="level-text" id="userLevel">Seviye 1</span>
                    <div class="level-bar">
                        <div class="level-progress" id="levelProgress" style="width: 0%"></div>
                    </div>
                </div>

                <button class="settings-btn" id="settingsBtn" title="Ayarlar">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </header>

        <!-- Main Navigation Tabs -->
        <nav class="main-tabs">
            <button class="main-tab active" data-tab="learn">
                <i class="fas fa-graduation-cap"></i>
                <span>Ã–ÄŸren</span>
            </button>
            <button class="main-tab" data-tab="patterns">
                <i class="fas fa-layer-group"></i>
                <span>KalÄ±plar</span>
            </button>
            <button class="main-tab" data-tab="wordlist">
                <i class="fas fa-list"></i>
                <span>Kelimeler</span>
            </button>
            <button class="main-tab" data-tab="dictionary">
                <i class="fas fa-book"></i>
                <span>SÃ¶zlÃ¼k</span>
            </button>
            <button class="main-tab" data-tab="stats">
                <i class="fas fa-chart-bar"></i>
                <span>Ä°statistik</span>
            </button>
        </nav>

        <!-- Tab Content -->
        <main class="tab-content">

            <!-- ==================== LEARN TAB ==================== -->
            <section class="tab-panel active" id="learnTab">
                <!-- Mode Selector -->
                <div class="learn-controls">
                    <div class="mode-selector">
                        <button class="mode-btn active" id="flashcardModeBtn">
                            <i class="fas fa-clone"></i>
                            Kart
                        </button>
                        <button class="mode-btn" id="quizModeBtn">
                            <i class="fas fa-question-circle"></i>
                            Quiz
                        </button>
                        <button class="mode-btn" id="matchingModeBtn">
                            <i class="fas fa-puzzle-piece"></i>
                            EÅŸleÅŸtir
                        </button>
                    </div>

                    <div class="filter-selectors">
                        <select id="categorySelect">
                            <option value="all">ğŸ“š TÃ¼m Kategoriler (2900 kelime)</option>
                            <option value="senses">ğŸ‘ï¸ Duyular (100)</option>
                            <option value="kitchen">ğŸ½ï¸ Mutfak (100)</option>
                            <option value="home">ğŸ  Ev (100)</option>
                            <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Aile (100)</option>
                            <option value="work">ğŸ’¼ Ä°ÅŸ (100)</option>
                            <option value="shopping">ğŸ›’ AlÄ±ÅŸveriÅŸ (100)</option>
                            <option value="travel">âœˆï¸ Seyahat (100)</option>
                            <option value="health">ğŸ¥ SaÄŸlÄ±k (100)</option>
                            <option value="education">ğŸ“ EÄŸitim (100)</option>
                            <option value="emotions">ğŸ­ Duygular (100)</option>
                            <option value="weather">â›… Hava (100)</option>
                            <option value="hobbies">ğŸ® Hobiler (100)</option>
                            <option value="technology">ğŸ’» Teknoloji (100)</option>
                            <option value="clothing">ğŸ‘— Giyim (100)</option>
                            <option value="city">ğŸ™ï¸ Åehir (100)</option>
                            <option value="sports">ğŸ… Spor (100)</option>
                            <option value="music">ğŸµ MÃ¼zik (100)</option>
                            <option value="nature">ğŸŒ¿ DoÄŸa (100)</option>
                            <option value="food">ğŸ• Yiyecek &amp; Ä°Ã§ecek (100)</option>
                            <option value="finance">ğŸ’° Finans (100)</option>
                            <option value="law">âš–ï¸ Hukuk (100)</option>
                            <option value="science">ğŸ”¬ Bilim (100)</option>
                            <option value="relationships">ğŸ¤ Ä°liÅŸkiler (100)</option>
                            <option value="business">ğŸ“Š Ä°ÅŸ Ä°ngilizcesi (100)</option>
                            <option value="computer">ğŸ–¥ï¸ Bilgisayar (100)</option>
                            <option value="daily">ğŸ’¬ GÃ¼nlÃ¼k KonuÅŸma (100)</option>
                            <option value="academic">ğŸ“š Akademik (100)</option>
                            <option value="animals">ğŸ¾ Hayvanlar (100)</option>
                            <option value="arts">ğŸ¨ Sanat &amp; KÃ¼ltÃ¼r (100)</option>
                        </select>

                        <select id="levelSelect">
                            <option value="all">ğŸ“Š TÃ¼m Seviyeler</option>
                            <option value="a1">ğŸŸ¢ A1</option>
                            <option value="a2">ğŸŸ¡ A2</option>
                            <option value="b1">ğŸŸ  B1</option>
                            <option value="b2">ğŸ”´ B2</option>
                            <option value="c1">ğŸŸ£ C1</option>
                        </select>
                    </div>
                </div>

                <!-- Flashcard Area -->
                <div class="flashcard-container">
                    <div class="flashcard" id="flashcard">
                        <div class="card-inner">
                            <div class="card-front" id="cardFront">
                                <div class="word-container">
                                    <h1 class="word"></h1>
                                    <p class="phonetic"></p>
                                </div>
                                <button class="action-btn" id="speakBtn" title="Dinle">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                                <p class="flip-hint">Ã‡evirmek iÃ§in tÄ±kla</p>
                            </div>
                            <div class="card-back" id="cardBack">
                                <h2 class="translation"></h2>
                                <div class="example-container">
                                    <p class="example"></p>
                                    <p class="example-tr"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Quiz Area (inside card for layout) -->
                        <div class="quiz-area" id="quizArea">
                            <div class="quiz-header-label">
                                <i class="fas fa-question-circle"></i> DoÄŸru Ã§eviriyi seÃ§
                            </div>
                            <div class="quiz-options-grid">
                                <button class="quiz-option" data-letter="A">
                                    <span class="quiz-letter">A</span>
                                    <span class="quiz-answer-text"></span>
                                </button>
                                <button class="quiz-option" data-letter="B">
                                    <span class="quiz-letter">B</span>
                                    <span class="quiz-answer-text"></span>
                                </button>
                                <button class="quiz-option" data-letter="C">
                                    <span class="quiz-letter">C</span>
                                    <span class="quiz-answer-text"></span>
                                </button>
                                <button class="quiz-option" data-letter="D">
                                    <span class="quiz-letter">D</span>
                                    <span class="quiz-answer-text"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Rating Buttons -->
                <div class="rating-btns" id="ratingBtns">
                    <button class="rating-btn hard" id="hardBtn">
                        Zor
                        <span>1 dk</span>
                    </button>
                    <button class="rating-btn good" id="goodBtn">
                        Ä°yi
                        <span>1 gÃ¼n</span>
                    </button>
                    <button class="rating-btn easy" id="easyBtn">
                        Kolay
                        <span>3 gÃ¼n</span>
                    </button>
                </div>

                <!-- Progress Section -->
                <div class="progress-section">
                    <div class="progress-header">
                        <span class="progress-text" id="progressText">0 / 0</span>
                        <span class="progress-text">Oturum Ä°lerlemesi</span>
                    </div>
                    <div class="progress-bar">
                        <div class="session-progress" id="sessionProgress"></div>
                    </div>
                </div>

                <!-- Sidebar Stats -->
                <div class="sidebar-stats">
                    <div class="mini-stat">
                        <span class="mini-stat-value" id="dueCount">0</span>
                        <span class="mini-stat-label">Bekleyen</span>
                    </div>
                    <div class="mini-stat">
                        <span class="mini-stat-value" id="learningCount">0</span>
                        <span class="mini-stat-label">Ã–ÄŸrenilen</span>
                    </div>
                    <div class="mini-stat">
                        <span class="mini-stat-value" id="masteredCount">0</span>
                        <span class="mini-stat-label">UstalaÅŸÄ±lan</span>
                    </div>
                </div>

                <!-- Matching Game Area -->
                <div class="matching-game-container" id="matchingGameContainer" style="display: none;">
                    <div class="matching-header">
                        <h2><i class="fas fa-puzzle-piece"></i> EÅŸleÅŸtirme Oyunu</h2>
                        <p class="matching-subtitle">Ä°ngilizce kelimeleri TÃ¼rkÃ§e karÅŸÄ±lÄ±klarÄ±yla eÅŸleÅŸtir!</p>
                    </div>

                    <div class="matching-game-stats" id="matchingGameStats" style="display: none;">
                        <div class="matching-stat">
                            <i class="fas fa-clock"></i>
                            <span id="matchingTimer">0:00</span>
                        </div>
                        <div class="matching-stat">
                            <i class="fas fa-hand-pointer"></i>
                            <span id="matchingMoves">0</span> Hamle
                        </div>
                        <div class="matching-stat">
                            <i class="fas fa-check-double"></i>
                            <span id="matchingPairs">0/6</span> EÅŸleÅŸme
                        </div>
                    </div>

                    <button class="matching-start-btn" id="matchingStartBtn">
                        <i class="fas fa-play"></i> Oyunu BaÅŸlat
                    </button>

                    <div class="matching-board" id="matchingBoard" style="display: none;">
                        <!-- Cards will be rendered here -->
                    </div>

                    <div class="matching-result" id="matchingResult" style="display: none;">
                        <!-- Result will be rendered here -->
                    </div>
                </div>

                <!-- Keyboard Shortcuts -->
                <div class="keyboard-hint">
                    <p>KÄ±sayollar: <kbd>Space</kbd> Ã‡evir | <kbd>1</kbd> Zor | <kbd>2</kbd> Ä°yi | <kbd>3</kbd> Kolay |
                        <kbd>S</kbd> Dinle
                    </p>
                </div>
            </section>

            <!-- ==================== PATTERNS TAB ==================== -->
            <section class="tab-panel" id="patternsTab">
                <div class="patterns-header">
                    <h2><i class="fas fa-layer-group"></i> Ä°ngilizce KalÄ±plar</h2>
                    <p class="patterns-subtitle">GÃ¼nlÃ¼k konuÅŸma iÃ§in en Ã¶nemli kalÄ±plar</p>
                </div>

                <!-- Daily Pattern -->
                <div class="daily-pattern-container" id="dailyPatternContainer">
                    <!-- Daily pattern will be injected here -->
                </div>

                <!-- Category Filters -->
                <div class="pattern-filters">
                    <button class="pattern-filter-btn active" data-category="all">TÃ¼mÃ¼</button>
                    <button class="pattern-filter-btn" data-category="starters">ğŸš€ BaÅŸlatÄ±cÄ±lar</button>
                    <button class="pattern-filter-btn" data-category="opinion">ğŸ—£ï¸ Fikir</button>
                    <button class="pattern-filter-btn" data-category="connectors">ğŸ”— BaÄŸlaÃ§lar</button>
                    <button class="pattern-filter-btn" data-category="questions">â“ Soru</button>
                    <button class="pattern-filter-btn" data-category="politeness">ğŸ™ Nezaket</button>
                </div>

                <!-- Patterns List -->
                <div class="patterns-list" id="patternsList">
                    <!-- Patterns will be rendered here -->
                </div>
            </section>

            <!-- ==================== WORD LIST TAB ==================== -->
            <section class="tab-panel" id="wordlistTab">
                <div class="wordlist-header">
                    <h2><i class="fas fa-list"></i> Kelime Listesi</h2>
                    <p class="wordlist-subtitle">TÃ¼m kelimeleri kategoriye ve seviyeye gÃ¶re gÃ¶rÃ¼ntÃ¼le</p>
                </div>

                <div class="wordlist-filters">
                    <select id="wlCategorySelect">
                        <option value="all">ğŸ“š TÃ¼m Kategoriler (2900 kelime)</option>
                        <option value="senses">ğŸ‘ï¸ Duyular (100)</option>
                        <option value="kitchen">ğŸ½ï¸ Mutfak (100)</option>
                        <option value="home">ğŸ  Ev (100)</option>
                        <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Aile (100)</option>
                        <option value="work">ğŸ’¼ Ä°ÅŸ (100)</option>
                        <option value="shopping">ğŸ›’ AlÄ±ÅŸveriÅŸ (100)</option>
                        <option value="travel">âœˆï¸ Seyahat (100)</option>
                        <option value="health">ğŸ¥ SaÄŸlÄ±k (100)</option>
                        <option value="education">ğŸ“ EÄŸitim (100)</option>
                        <option value="emotions">ğŸ­ Duygular (100)</option>
                        <option value="weather">â›… Hava (100)</option>
                        <option value="hobbies">ğŸ® Hobiler (100)</option>
                        <option value="technology">ğŸ’» Teknoloji (100)</option>
                        <option value="clothing">ğŸ‘— Giyim (100)</option>
                        <option value="city">ğŸ™ï¸ Åehir (100)</option>
                        <option value="sports">ğŸ… Spor (100)</option>
                        <option value="music">ğŸµ MÃ¼zik (100)</option>
                        <option value="nature">ğŸŒ¿ DoÄŸa (100)</option>
                        <option value="food">ğŸ• Yiyecek &amp; Ä°Ã§ecek (100)</option>
                        <option value="finance">ğŸ’° Finans (100)</option>
                        <option value="law">âš–ï¸ Hukuk (100)</option>
                        <option value="science">ğŸ”¬ Bilim (100)</option>
                        <option value="relationships">ğŸ¤ Ä°liÅŸkiler (100)</option>
                        <option value="business">ğŸ“Š Ä°ÅŸ Ä°ngilizcesi (100)</option>
                        <option value="computer">ğŸ–¥ï¸ Bilgisayar (100)</option>
                        <option value="daily">ğŸ’¬ GÃ¼nlÃ¼k KonuÅŸma (100)</option>
                        <option value="academic">ğŸ“š Akademik (100)</option>
                        <option value="animals">ğŸ¾ Hayvanlar (100)</option>
                        <option value="arts">ğŸ¨ Sanat &amp; KÃ¼ltÃ¼r (100)</option>
                    </select>

                    <select id="wlLevelSelect">
                        <option value="all">ğŸ“Š TÃ¼m Seviyeler</option>
                        <option value="a1">ğŸŸ¢ A1 - BaÅŸlangÄ±Ã§</option>
                        <option value="a2">ğŸŸ¡ A2 - Temel</option>
                        <option value="b1">ğŸŸ  B1 - Orta</option>
                        <option value="b2">ğŸ”´ B2 - Orta ÃœstÃ¼</option>
                        <option value="c1">ğŸŸ£ C1 - Ä°leri</option>
                    </select>

                    <input type="text" id="wlSearchInput" placeholder="ğŸ” Kelime ara...">
                </div>

                <div class="wordlist-stats">
                    <span id="wlWordCount">910 kelime</span>
                </div>

                <div class="wordlist-container" id="wordlistContainer">
                    <!-- Words will be rendered here -->
                </div>
            </section>

            <!-- ==================== DICTIONARY TAB ==================== -->
            <section class="tab-panel" id="dictionaryTab">
                <div class="dict-header">
                    <h2><i class="fas fa-book"></i> Online SÃ¶zlÃ¼k</h2>
                    <p class="dict-subtitle">Herhangi bir Ä°ngilizce kelimeyi ara</p>
                </div>

                <div class="dict-search-container">
                    <div class="dict-search-bar">
                        <input type="text" id="dictSearchInput" placeholder="Ä°ngilizce kelime yaz... (Ã¶rn: beautiful)">
                        <button class="dict-search-btn" id="dictSearchBtn">
                            <i class="fas fa-search"></i> Ara
                        </button>
                    </div>
                </div>

                <div class="dict-result-container" id="dictResultContainer">
                    <div class="dict-welcome">
                        <i class="fas fa-book-open"></i>
                        <h3>Free Dictionary API</h3>
                        <p>YukarÄ±ya bir Ä°ngilizce kelime yazÄ±n</p>
                        <ul class="dict-features">
                            <li><i class="fas fa-check"></i> Kelime tanÄ±mlarÄ±</li>
                            <li><i class="fas fa-check"></i> Fonetik yazÄ±m</li>
                            <li><i class="fas fa-check"></i> Sesli telaffuz</li>
                            <li><i class="fas fa-check"></i> Ã–rnek cÃ¼mleler</li>
                            <li><i class="fas fa-check"></i> EÅŸanlamlÄ±lar</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ==================== STATS TAB ==================== -->
            <section class="tab-panel" id="statsTab">
                <div class="stats-dashboard">
                    <!-- Top Row: Streak + Goal -->
                    <div class="stats-top-row">
                        <div class="stats-widget" id="statsStreakWidget"></div>
                        <div class="stats-widget" id="statsDailyGoal"></div>
                    </div>

                    <!-- Today Stats Cards -->
                    <div class="stats-cards-grid" id="statsTodayCards"></div>

                    <!-- Weekly Activity -->
                    <div class="stats-section" id="statsWeeklyActivity"></div>

                    <!-- Word Status -->
                    <div class="stats-section" id="statsWordStatus"></div>

                    <!-- Category Breakdown -->
                    <div class="stats-section" id="statsCategoryBreakdown"></div>
                </div>
            </section>

        </main>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Ayarlar</h2>
                <button class="close-modal">&times;</button>
            </div>

            <div class="modal-content">
                <div class="setting-group">
                    <label for="speechRate">KonuÅŸma HÄ±zÄ±</label>
                    <input type="range" id="speechRate" min="0.5" max="1.5" step="0.1" value="1">
                    <div class="setting-value" id="rateValue">1x</div>
                </div>

                <div class="setting-group">
                    <label>Ä°statistikler</label>
                    <div style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                        <div class="mini-stat" style="flex: 1;">
                            <span class="mini-stat-value" id="totalWordsLearned">0</span>
                            <span class="mini-stat-label">Ã–ÄŸrenilen</span>
                        </div>
                        <div class="mini-stat" style="flex: 1;">
                            <span class="mini-stat-value" id="accuracyPercent">0%</span>
                            <span class="mini-stat-label">DoÄŸruluk</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- Scripts -->
    <script src="js/storage.js?v=3"></script>
    <script src="js/srs.js?v=3"></script>
    <script src="js/speech.js?v=3"></script>
    <script src="js/app.js?v=3"></script>
    <script src="js/stats.js?v=3"></script>
    <script src="js/matching.js?v=3"></script>
    <script src="js/wordlist.js?v=3"></script>
    <script src="js/dictionary.js?v=3"></script>
    <script src="js/patterns.js?v=3"></script>
    <script src="js/chatbot.js?v=3"></script>

    <!-- Service Worker Registration (with force cache clear) -->
    <script>
        // Force clear old Service Workers and caches first
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                // Unregister ALL old service workers
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (const reg of registrations) {
                    await reg.unregister();
                    console.log('ğŸ§¹ Old SW unregistered');
                }
                // Delete ALL old caches
                const cacheNames = await caches.keys();
                for (const name of cacheNames) {
                    await caches.delete(name);
                    console.log('ğŸ§¹ Cache deleted:', name);
                }
                // Now register fresh SW
                try {
                    const registration = await navigator.serviceWorker.register('/sw.js');
                    console.log('âœ… Fresh Service Worker registered:', registration.scope);
                } catch (error) {
                    console.log('âŒ Service Worker registration failed:', error);
                }
            });
        }

        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('ğŸ“± PWA install prompt ready');
        });
    </script>
</body>

</html>